{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/uditasharma/React Projects/edupay-ui/src/screens/login/index.jsx\";\nimport React from \"react\";\nimport '../../App.css';\nimport UserStore from \"../../stores/userStore\";\nimport { Login } from './login';\nimport { Register } from './register';\nimport { observer } from 'mobx-react';\nimport LoginFormComponent from '../../components/loginFormComponent';\nimport SubmitButtonComponent from '../../components/submitButton';\n\nclass IndexPage extends React.Component {\n  async componentDidMount() {\n    try {\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application.json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.username = result.username;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLogginActive = false;\n      }\n    } catch (e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application.json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.isLoggedIn = false;\n        UserStore.username = '';\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogginActive: true,\n      current: \"Register\"\n    };\n  }\n\n  changeState() {\n    const {\n      isLogginActive\n    } = this.state;\n\n    if (isLogginActive) {\n      this.rightSide.classList.remove(\"right\");\n      this.rightSide.classList.add(\"left\");\n    } else {\n      this.rightSide.classList.remove(\"left\");\n      this.rightSide.classList.add(\"right\");\n    }\n\n    this.setState(prevState => ({\n      isLogginActive: !prevState.isLogginActive\n    }));\n  }\n\n  render() {\n    if (UserStore.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          classname: \"container\",\n          children: \"Loading, please wait...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this);\n    } else {\n      if (UserStore.isLoggedIn) {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          classname: \"App\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            classname: \"container\",\n            children: [\"Welcome \", UserStore.username, /*#__PURE__*/_jsxDEV(SubmitButtonComponent, {\n              text: 'Log out',\n              disabled: false,\n              onClick: () => this.doLogout()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this);\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        classname: \"App\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          classname: \"container\",\n          children: /*#__PURE__*/_jsxDEV(LoginFormComponent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 9\n      }, this);\n    } /////////////////////////////////////////////////\n\n\n    const {\n      isLogginActive\n    } = this.state;\n    const current = isLogginActive ? \"Register\" : \"Login\";\n    const currentAction = isLogginActive ? \"login\" : \"register\";\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container\",\n          children: [isLogginActive && /*#__PURE__*/_jsxDEV(Login, {\n            history: this.props.history,\n            containerRef: ref => this.current = ref\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 34\n          }, this), !isLogginActive && /*#__PURE__*/_jsxDEV(Register, {\n            history: this.props.history,\n            containerRef: ref => this.current = ref\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 35\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(RightSide, {\n          current: current,\n          containerRef: ref => this.rightSide = ref,\n          onClick: this.changeState.bind(this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst RightSide = props => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"right-side\",\n    ref: props.containerRef,\n    onClick: props.onClick,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inner-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: props.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 11\n  }, this);\n};\n\n_c = RightSide;\nexport default _c2 = observer(IndexPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RightSide\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/uditasharma/React Projects/edupay-ui/src/screens/login/index.jsx"],"names":["React","UserStore","Login","Register","observer","LoginFormComponent","SubmitButtonComponent","IndexPage","Component","componentDidMount","res","fetch","method","headers","result","json","success","loading","isLoggedIn","username","isLogginActive","e","doLogout","console","log","constructor","props","state","current","changeState","rightSide","classList","remove","add","setState","prevState","render","currentAction","history","ref","bind","RightSide","containerRef","onClick"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport '../../App.css';\nimport UserStore from \"../../stores/userStore\";\nimport { Login } from './login';\nimport { Register } from './register';\nimport { observer }  from 'mobx-react';\nimport LoginFormComponent from '../../components/loginFormComponent';\nimport SubmitButtonComponent from '../../components/submitButton';\n\nclass IndexPage extends React.Component {\n\n  async componentDidMount(){\n    try{\n      let res = await fetch('/isLoggedIn',{\n        method: 'post',\n        headers:{\n          'Accept': 'application/json',\n          'Content-Type':'application.json'\n        }\n      });\n      let result = await res.json();\n      if(result && result.success){\n\n        UserStore.loading=false;\n        UserStore.isLoggedIn=true;\n        UserStore.username=result.username;\n\n      }else{\n        UserStore.loading=false;\n        UserStore.isLogginActive=false;\n      }\n    }catch(e){\n      UserStore.loading=false;\n      UserStore.isLoggedIn=false;\n    }\n  }\n\n  async doLogout(){\n    try{\n      let res = await fetch('/logout',{\n        method: 'post',\n        headers:{\n          'Accept': 'application/json',\n          'Content-Type':'application.json'\n        }\n      });\n      let result = await res.json();\n      if(result && result.success){\n        UserStore.isLoggedIn=false;\n        UserStore.username='';\n\n      }\n    }catch(e){\n        console.log(e);\n    }\n  }\n  constructor(props){\n    super(props);\n    this.state = {\n      isLogginActive: true,\n      current: \"Register\"\n    }\n  }\n\n  changeState(){\n    \n    const { isLogginActive } = this.state;\n\n    if (isLogginActive) {\n      this.rightSide.classList.remove(\"right\");\n      this.rightSide.classList.add(\"left\");\n    } else {\n      this.rightSide.classList.remove(\"left\");\n      this.rightSide.classList.add(\"right\");\n    }\n    this.setState(prevState => ({ isLogginActive: !prevState.isLogginActive }));\n\n  }\n  render(){\n\n\n\n    if(UserStore.loading){\n\n      return (\n        <div className='App'>\n          <div classname='container'>\n            Loading, please wait...\n          </div>\n        </div>\n      );\n\n    }else{\n\n      if(UserStore.isLoggedIn){\n        return(\n\n          <div classname='App'>\n            <div classname='container'>\n              Welcome {UserStore.username}\n\n              <SubmitButtonComponent\n              text={'Log out'}\n              disabled={false}\n              onClick={()=>this.doLogout()}\n              />\n\n            </div>\n          </div>\n\n\n        );\n      }\n\n      return(\n        <div classname='App'>\n            <div classname='container'>\n              <LoginFormComponent/>\n            </div>\n          </div>\n\n      );\n\n\n\n\n    }\n\n\n\n\n\n    /////////////////////////////////////////////////\n    const {isLogginActive} = this.state;\n    const current = isLogginActive ? \"Register\" : \"Login\";\n    const currentAction = isLogginActive ? \"login\" : \"register\";\n    return(\n      <div className=\"App\">\n        <div className=\"login\">\n            <div className=\"container\">\n              {isLogginActive && <Login  history={this.props.history} containerRef={(ref) => this.current = ref}/>}\n              {!isLogginActive && <Register history={this.props.history} containerRef={(ref) => this.current = ref}/>}\n            </div>\n            <RightSide current = {current} containerRef={(ref)=> this.rightSide = ref} onClick={this.changeState.bind(this)} />\n        </div>\n      </div>\n    )\n  }\n\n}\n\nconst RightSide = (props) => {\n  return (<div className=\"right-side\" ref={props.containerRef} onClick={props.onClick}>\n    <div className=\"inner-container\">\n      <div className=\"text\">{props.current}</div>\n    </div>\n\n  </div>);\n}\n\nexport default observer(IndexPage);\n"]},"metadata":{},"sourceType":"module"}