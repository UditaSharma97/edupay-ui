{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/uditasharma/React Projects/edupay-ui/src/screens/login/index.jsx\";\nimport React from \"react\";\nimport '../../App.css';\nimport UserStore from \"../../stores/userStore\";\nimport { Login } from './login';\nimport { Register } from './register';\nimport { observer } from 'mobx-react';\nimport LoginFormComponent from '../../components/loginFormComponent';\nimport SubmitButtonComponent from '../../components/submitButton';\nimport RegisterFormComponent from '../../components/registerFormComponent';\n\nclass IndexPage extends React.Component {\n  async componentDidMount() {\n    try {\n      let res = await fetch('/isLoggedIn', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application.json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.loading = false;\n        UserStore.isLoggedIn = true;\n        UserStore.username = result.username;\n      } else {\n        UserStore.loading = false;\n        UserStore.isLogginActive = false;\n      }\n    } catch (e) {\n      UserStore.loading = false;\n      UserStore.isLoggedIn = false;\n    }\n  }\n\n  async doLogout() {\n    try {\n      let res = await fetch('/logout', {\n        method: 'post',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application.json'\n        }\n      });\n      let result = await res.json();\n\n      if (result && result.success) {\n        UserStore.isLoggedIn = false;\n        UserStore.username = '';\n      }\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLogginActive: true,\n      current: \"Register\"\n    };\n  }\n\n  changeState() {\n    const {\n      isLogginActive\n    } = this.state;\n\n    if (isLogginActive) {\n      this.rightSide.classList.remove(\"right\");\n      this.rightSide.classList.add(\"left\");\n    } else {\n      this.rightSide.classList.remove(\"left\");\n      this.rightSide.classList.add(\"right\");\n    }\n\n    this.setState(prevState => ({\n      isLogginActive: !prevState.isLogginActive\n    }));\n  }\n\n  render() {\n    if (UserStore.loading) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          classname: \"container\",\n          children: \"Loading, please wait...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this);\n    } else {\n      if (UserStore.isLoggedIn) {\n        return (\n          /*#__PURE__*/\n          //render home screen\n          _jsxDEV(\"div\", {\n            classname: \"App\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              classname: \"container\",\n              children: [\"Welcome \", UserStore.username, /*#__PURE__*/_jsxDEV(SubmitButtonComponent, {\n                text: 'Log out',\n                disabled: false,\n                onClick: () => this.doLogout()\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }, this)\n        );\n      }\n\n      const {\n        isLogginActive\n      } = this.state;\n      const current = isLogginActive ? \"Register\" : \"Login\";\n      const currentAction = isLogginActive ? \"login\" : \"register\";\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"login\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: [this.props.isLogginActive && /*#__PURE__*/_jsxDEV(LoginFormComponent, {\n              history: this.props.history,\n              containerRef: ref => this.current = ref\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 47\n            }, this), !this.props.isLogginActive && /*#__PURE__*/_jsxDEV(RegisterFormComponent, {\n              history: this.props.history,\n              containerRef: ref => this.current = ref\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 48\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(RightSide, {\n            current: current,\n            containerRef: ref => this.rightSide = ref,\n            onClick: this.changeState.bind(this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nconst RightSide = props => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"right-side\",\n    ref: props.containerRef,\n    onClick: props.onClick,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"inner-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: props.current\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 131,\n    columnNumber: 11\n  }, this);\n};\n\n_c = RightSide;\nexport default _c2 = observer(IndexPage);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"RightSide\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/uditasharma/React Projects/edupay-ui/src/screens/login/index.jsx"],"names":["React","UserStore","Login","Register","observer","LoginFormComponent","SubmitButtonComponent","RegisterFormComponent","IndexPage","Component","componentDidMount","res","fetch","method","headers","result","json","success","loading","isLoggedIn","username","isLogginActive","e","doLogout","console","log","constructor","props","state","current","changeState","rightSide","classList","remove","add","setState","prevState","render","currentAction","history","ref","bind","RightSide","containerRef","onClick"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport '../../App.css';\nimport UserStore from \"../../stores/userStore\";\nimport { Login } from './login';\nimport { Register } from './register';\nimport { observer }  from 'mobx-react';\nimport LoginFormComponent from '../../components/loginFormComponent';\nimport SubmitButtonComponent from '../../components/submitButton';\nimport RegisterFormComponent from '../../components/registerFormComponent';\nclass IndexPage extends React.Component {\n\n  async componentDidMount(){\n    try{\n      let res = await fetch('/isLoggedIn',{\n        method: 'post',\n        headers:{\n          'Accept': 'application/json',\n          'Content-Type':'application.json'\n        }\n      });\n      let result = await res.json();\n      if(result && result.success){\n\n        UserStore.loading=false;\n        UserStore.isLoggedIn=true;\n        UserStore.username=result.username;\n\n      }else{\n        UserStore.loading=false;\n        UserStore.isLogginActive=false;\n      }\n    }catch(e){\n      UserStore.loading=false;\n      UserStore.isLoggedIn=false;\n    }\n  }\n\n  async doLogout(){\n    try{\n      let res = await fetch('/logout',{\n        method: 'post',\n        headers:{\n          'Accept': 'application/json',\n          'Content-Type':'application.json'\n        }\n      });\n      let result = await res.json();\n      if(result && result.success){\n        UserStore.isLoggedIn=false;\n        UserStore.username='';\n\n      }\n    }catch(e){\n        console.log(e);\n    }\n  }\n  \n  constructor(props){\n    super(props);\n    this.state = {\n      isLogginActive: true,\n      current: \"Register\"\n    }\n  }\n\n  changeState(){\n    \n    const { isLogginActive } = this.state;\n\n    if (isLogginActive) {\n      this.rightSide.classList.remove(\"right\");\n      this.rightSide.classList.add(\"left\");\n    } else {\n      this.rightSide.classList.remove(\"left\");\n      this.rightSide.classList.add(\"right\");\n    }\n    this.setState(prevState => ({ isLogginActive: !prevState.isLogginActive }));\n\n  }\n  render(){\n    if(UserStore.loading){\n\n      return (\n        <div className='App'>\n          <div classname='container'>\n            Loading, please wait...\n          </div>\n        </div>\n      );\n\n    }else{\n\n      if(UserStore.isLoggedIn){\n        return(\n          //render home screen\n          <div classname='App'>\n            <div classname='container'>\n              Welcome {UserStore.username}\n\n              <SubmitButtonComponent\n              text={'Log out'}\n              disabled={false}\n              onClick={()=>this.doLogout()}\n              />\n\n            </div>\n          </div>\n\n\n        );\n      }\n\n      const { isLogginActive } = this.state;\n      const current = isLogginActive ? \"Register\" : \"Login\";\n      const currentAction = isLogginActive ? \"login\" : \"register\";\n      return(\n        <div className=\"App\">\n          <div className=\"login\">\n              <div className=\"container\">\n                {this.props.isLogginActive && <LoginFormComponent  history={this.props.history} containerRef={(ref) => this.current = ref}/>}\n                {!this.props.isLogginActive && <RegisterFormComponent history={this.props.history} containerRef={(ref) => this.current = ref}/>}\n              </div>\n              <RightSide current = {current} containerRef={(ref)=> this.rightSide = ref} onClick={this.changeState.bind(this)} />\n          </div>\n        </div>\n      );\n    }\n  }\n}\nconst RightSide=(props)=>{\n  return (<div className=\"right-side\" ref={props.containerRef} onClick={props.onClick}>\n    <div className=\"inner-container\">\n      <div className=\"text\">{props.current}</div>\n    </div>\n\n  </div>);\n}\nexport default observer(IndexPage);\n"]},"metadata":{},"sourceType":"module"}